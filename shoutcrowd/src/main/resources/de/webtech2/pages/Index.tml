<html t:type="layout" title="shoutcrowd Index"
      t:sidebarTitle="Framework Version"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">
        <!-- Most of the page content, including <head>, <body>, etc. tags, comes from Layout.tml -->

<t:CheckLogin/>

    <p>${message:greeting}</p>


    <!-- Dominic Test Begin -->
    <p>
        <h1>User List (grid):</h1>
        <t:grid source="users" row="user" add="following">
            <p:followingCell>
                <t:loop source="user.followingUsers" value="followingUser">
                    ${followingUser.username}
                </t:loop>
            </p:followingCell>
        </t:grid>
    </p>
    <p>
        <h1>Test File Upload</h1>
        <t:form>
            <input t:type="upload" t:id="file" t:value="file" validate="required"/>
            <t:submit t:id="UploadPicture" value="UploadPicture"/>
        </t:form>
        <h3>Uploaded File</h3>
        <img src="userpics/test2.png" />
    </p>
    <p>
        <h1>new user add:</h1>
        <t:beaneditform 
		t:id="userForm"
		object="user">
	</t:beaneditform>
    </p>
    <p>
        <h1>following user add:</h1>
        <t:form>
            <t:select t:id="userMenuFrom" value="followingUserFrom" model="userSelectModel" />
            <t:select t:id="userMenuTo" value="followingUserTo" model="userSelectModel" />
            <t:submit t:id="AddFollowingUser" value="AddFollowingUser"/>
        </t:form>
    </p>

    <p>
        <h1>Message List (grid):</h1>
        <t:grid source="messages" row="message" add="author">
            <p:authorCell>
                <t:loop source="message.author" value="messageAuthor">
                    ${messageAuthor.username}
                </t:loop>
            </p:authorCell>
        </t:grid>
    </p>
    <p>
        <h1>new message add:</h1>
        <t:beaneditform 
		t:id="messageForm"
		object="message">
	</t:beaneditform>
    </p>
    <!-- Dominic Test End -->
    

    <p>The current time is: <strong>${currentTime}</strong></p>

    <!-- A Zone is a component that can be updated in place, triggered by other components. -->
    <t:zone t:id="zone">
        <p>
            You have clicked the link <strong>${clickCount}</strong> times.
        </p>

        <p>
            [
            <t:actionlink t:id="increment">increment</t:actionlink>
            ]
            &nbsp;
            [
            <t:actionlink t:id="incrementAjax" zone="^">increment (via Ajax)</t:actionlink>
            ]
        </p>

    </t:zone>

    <p:sidebar>
        <p>
            You are running Tapestry version <strong>${tapestryVersion}</strong>.
        </p>


        <p>
            [
            <t:pagelink page="Index">refresh page</t:pagelink>
            ]
        </p>
    </p:sidebar>

</html>
